<li>
    <a href="{% url 'main' %}"
            {% if 'main' in request.resolver_match.url_name %} class="active" {% endif %}>
        домой
    </a>
</li>
<li>
    <a href="{% url 'products:products' %}"
            {% if request.resolver_match.namespace == 'products' %} class="active" {% endif %}>
        продукты
    </a>
</li>
<li>
    <a href="{% url 'contact' %}"
            {% if 'contact' in request.resolver_match.url_name %} class="active" {% endif %}>
        контакты
    </a>
</li>

{% if user.is_authenticated %}
<li>
    <a href="{% url 'auth:edit' %}">
        {{ user.first_name|default:'Пользователь' }}
    </a>
</li>
{% endif %}
<li>
    {% if user.is_authenticated %}
      <a href="{% url 'auth:logout' %}">выйти</a>
    {% else %}
      <a href="{% url 'auth:login' %}">войти</a>
    {% endif %}
</li>

{% if not user.is_authenticated %}
<li>
    <a href="{% url 'auth:register' %}">
        Регистрация
    </a>
</li>
{% endif %}
